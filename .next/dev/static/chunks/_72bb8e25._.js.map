{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,qPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,+SAAI,GAAG;IAE9B,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/app/actions/process-receipt.ts"],"sourcesContent":["\"use server\";\n\nexport async function processReceipt(base64Data: string) {\n  if (!base64Data) return { ok: false, error: \"No image data\" };\n\n  try {\n    // Extract base64 from data URL if needed\n    let imageBase64 = base64Data;\n    if (base64Data.startsWith('data:')) {\n      const match = base64Data.match(/base64,(.+)$/);\n      if (match) {\n        imageBase64 = match[1];\n      }\n    }\n\n    // Decode base64 to buffer\n    const buf = Buffer.from(imageBase64, 'base64');\n\n    // Resize if > 1 MB (keeps quality, drops size)\n    const sharp = (await import(\"sharp\")).default;\n    let out = buf;\n    if (buf.length > 1_000_000) {\n      out = await sharp(buf)\n                 .resize({ width: 1200, withoutEnlargement: true })\n                 .jpeg({ quality: 85 })\n                 .toBuffer();\n    }\n\n    const resizedBase64 = out.toString('base64');\n\n    // Call Gemini 1.5 Flash (free tier)\n    const { GoogleGenerativeAI } = await import(\"@google/generative-ai\");\n    const genAI = new GoogleGenerativeAI(process.env.GOOGLE_API_KEY!);\n    const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\n\n    const prompt = `Extract JSON: {merchant,total,tax,date,category,emoji} from this receipt.`;\n    const result = await model.generateContent([\n      prompt,\n      {\n        inlineData: {\n          data: resizedBase64,\n          mimeType: \"image/jpeg\"\n        }\n      }\n    ]);\n    const txt = result.response.text();\n\n    try {\n      const data = JSON.parse(txt.replace(/```json|```/g, \"\"));\n      return { ok: true, data };\n    } catch {\n      return { ok: false, error: \"Parse failed\" };\n    }\n  } catch (error) {\n    const msg = error instanceof Error ? error.message : String(error);\n    return { ok: false, error: `Server error: ${msg}` };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAEsB,iBAAA,WAAA,GAAA,IAAA,iXAAA,EAAA,8CAAA,sWAAA,EAAA,KAAA,GAAA,4WAAA,EAAA"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/lib/db-utils.ts"],"sourcesContent":["interface Expense {\n  id: string\n  merchant: string\n  amount: number\n  category: string\n  date: string\n  receipt?: string\n}\n\nfunction openIndexedDB(): Promise<IDBDatabase> {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('ReceiptSnapDB', 1)\n    request.onerror = () => reject(request.error)\n    request.onsuccess = () => resolve(request.result)\n    request.onupgradeneeded = (event) => {\n      const db = (event.target as IDBOpenDBRequest).result\n      if (!db.objectStoreNames.contains('expenses')) {\n        db.createObjectStore('expenses', { keyPath: 'id' })\n      }\n      if (!db.objectStoreNames.contains('metadata')) {\n        db.createObjectStore('metadata', { keyPath: 'key' })\n      }\n    }\n  })\n}\n\nexport async function saveExpenseToIndexedDB(data: any): Promise<Expense> {\n  const db = await openIndexedDB()\n  const expense: Expense = {\n    id: crypto.randomUUID(),\n    merchant: data.merchant,\n    amount: parseFloat(String(data.amount)),\n    category: data.category,\n    date: new Date().toISOString(),\n  }\n\n  // Save expense\n  await new Promise((resolve, reject) => {\n    const tx = db.transaction('expenses', 'readwrite')\n    const store = tx.objectStore('expenses')\n    const request = store.add(expense)\n    request.onerror = () => reject(request.error)\n    request.onsuccess = () => resolve(null)\n  })\n\n  // Update scan count\n  const tx = db.transaction('metadata', 'readwrite')\n  const store = tx.objectStore('metadata')\n  await new Promise((resolve) => {\n    const request = store.get('scanCount')\n    request.onsuccess = () => {\n      const current = request.result?.value || 0\n      const updateRequest = store.put({ key: 'scanCount', value: current + 1 })\n      updateRequest.onsuccess = () => resolve(null)\n    }\n  })\n\n  return expense\n}\n\nexport async function deleteExpenseFromIndexedDB(id: string): Promise<void> {\n  const db = await openIndexedDB()\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('expenses', 'readwrite')\n    const store = tx.objectStore('expenses')\n    const request = store.delete(id)\n    request.onerror = () => reject(request.error)\n    request.onsuccess = () => resolve()\n  })\n}\n"],"names":[],"mappings":";;;;;;AASA,SAAS;IACP,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,UAAU,UAAU,IAAI,CAAC,iBAAiB;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;QAC5C,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,eAAe,GAAG,CAAC;YACzB,MAAM,KAAK,AAAC,MAAM,MAAM,CAAsB,MAAM;YACpD,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC7C,GAAG,iBAAiB,CAAC,YAAY;oBAAE,SAAS;gBAAK;YACnD;YACA,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC7C,GAAG,iBAAiB,CAAC,YAAY;oBAAE,SAAS;gBAAM;YACpD;QACF;IACF;AACF;AAEO,eAAe,uBAAuB,IAAS;IACpD,MAAM,KAAK,MAAM;IACjB,MAAM,UAAmB;QACvB,IAAI,OAAO,UAAU;QACrB,UAAU,KAAK,QAAQ;QACvB,QAAQ,WAAW,OAAO,KAAK,MAAM;QACrC,UAAU,KAAK,QAAQ;QACvB,MAAM,IAAI,OAAO,WAAW;IAC9B;IAEA,eAAe;IACf,MAAM,IAAI,QAAQ,CAAC,SAAS;QAC1B,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,MAAM,QAAQ,GAAG,WAAW,CAAC;QAC7B,MAAM,UAAU,MAAM,GAAG,CAAC;QAC1B,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;QAC5C,QAAQ,SAAS,GAAG,IAAM,QAAQ;IACpC;IAEA,oBAAoB;IACpB,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;IACtC,MAAM,QAAQ,GAAG,WAAW,CAAC;IAC7B,MAAM,IAAI,QAAQ,CAAC;QACjB,MAAM,UAAU,MAAM,GAAG,CAAC;QAC1B,QAAQ,SAAS,GAAG;YAClB,MAAM,UAAU,QAAQ,MAAM,EAAE,SAAS;YACzC,MAAM,gBAAgB,MAAM,GAAG,CAAC;gBAAE,KAAK;gBAAa,OAAO,UAAU;YAAE;YACvE,cAAc,SAAS,GAAG,IAAM,QAAQ;QAC1C;IACF;IAEA,OAAO;AACT;AAEO,eAAe,2BAA2B,EAAU;IACzD,MAAM,KAAK,MAAM;IACjB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,MAAM,QAAQ,GAAG,WAAW,CAAC;QAC7B,MAAM,UAAU,MAAM,MAAM,CAAC;QAC7B,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;QAC5C,QAAQ,SAAS,GAAG,IAAM;IAC5B;AACF"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/components/camera-capture.tsx"],"sourcesContent":["'use client'\n\nimport { useRef, useState, useTransition } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Card } from '@/components/ui/card'\nimport { Camera, Loader2, AlertCircle, Upload } from 'lucide-react'\nimport { processReceipt } from '@/app/actions/process-receipt'\nimport { saveExpenseToIndexedDB } from '@/lib/db-utils'\n\ninterface CameraCaptureProps {\n  onExpenseAdded: (expense: any) => void\n  onProcessingComplete?: () => void\n}\n\nexport default function CameraCapture({ onExpenseAdded, onProcessingComplete }: CameraCaptureProps) {\n  const cameraInputRef = useRef<HTMLInputElement>(null)\n  const galleryInputRef = useRef<HTMLInputElement>(null)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [previewImage, setPreviewImage] = useState<string | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [isPending, startTransition] = useTransition()\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0]\n    if (!file) return\n\n    const maxSize = 10 * 1024 * 1024\n    if (file.size > maxSize) {\n      setError('File too large. Please use an image under 10MB.')\n      return\n    }\n\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      setPreviewImage(e.target?.result as string)\n      setError(null)\n    }\n    reader.onerror = () => setError('Failed to read file.')\n    reader.readAsDataURL(file)\n  }\n\n  const handleProcessReceipt = async () => {\n    if (!previewImage) return\n    setError(null)\n\n    startTransition(async () => {\n      try {\n        console.log('[v0] Starting receipt processing...')\n        const result = await processReceipt(previewImage)\n        \n        if (!result.ok) {\n          setError(result.error || 'Failed to process receipt')\n          return\n        }\n        \n        console.log('[v0] Receipt processed successfully:', result.data)\n        const expense = await saveExpenseToIndexedDB(result.data)\n        onExpenseAdded(expense)\n        setPreviewImage(null)\n        onProcessingComplete?.()\n      } catch (err) {\n        const errorMessage = err instanceof Error ? err.message : 'Failed to process receipt'\n        console.error('[v0] Processing failed:', errorMessage)\n        setError(errorMessage)\n      }\n    })\n  }\n\n  if (previewImage) {\n    return (\n      <div className=\"space-y-4\">\n        <Card className=\"overflow-hidden\">\n          <img\n            src={previewImage || \"/placeholder.svg\"}\n            alt=\"Receipt\"\n            className=\"w-full h-96 object-cover\"\n          />\n        </Card>\n\n        {error && (\n          <Card className=\"bg-red-50 dark:bg-red-950 border-red-200 p-4 flex gap-3\">\n            <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-sm text-red-900\">{error}</p>\n          </Card>\n        )}\n\n        <div className=\"flex gap-3\">\n          <Button onClick={() => setPreviewImage(null)} variant=\"outline\" className=\"flex-1\">\n            Retake\n          </Button>\n          <Button onClick={handleProcessReceipt} disabled={isPending} className=\"flex-1\">\n            {isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            {isPending ? 'Processing...' : 'Process'}\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <Card className=\"p-8\">\n      <div className=\"flex flex-col items-center justify-center space-y-6\">\n        <div className=\"bg-primary/10 p-4 rounded-full\">\n          <Camera className=\"h-12 w-12 text-primary\" />\n        </div>\n\n        <div className=\"text-center space-y-2\">\n          <h3 className=\"text-lg font-semibold\">Snap Your Receipt</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Take a photo or upload from your gallery\n          </p>\n        </div>\n\n        <div className=\"w-full space-y-3\">\n          <Button onClick={() => cameraInputRef.current?.click()} className=\"w-full\" size=\"lg\">\n            <Camera className=\"mr-2 h-4 w-4\" />\n            Take Photo with Camera\n          </Button>\n\n          <Button onClick={() => galleryInputRef.current?.click()} variant=\"outline\" className=\"w-full\" size=\"lg\">\n            <Upload className=\"mr-2 h-4 w-4\" />\n            Choose from Gallery\n          </Button>\n        </div>\n\n        {/* Camera input - opens native camera */}\n        <input\n          ref={cameraInputRef}\n          type=\"file\"\n          accept=\"image/*\"\n          capture=\"environment\"\n          onChange={handleFileUpload}\n          className=\"hidden\"\n        />\n\n        {/* Gallery input - opens photo gallery */}\n        <input\n          ref={galleryInputRef}\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleFileUpload}\n          className=\"hidden\"\n        />\n      </div>\n\n      {error && (\n        <div className=\"mt-4 p-4 bg-red-50 dark:bg-red-950 border border-red-200 rounded-lg flex gap-3\">\n          <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n          <p className=\"text-sm text-red-900\">{error}</p>\n        </div>\n      )}\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 625, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/lib/export-utils.tsx"],"sourcesContent":["interface Expense {\n  id: string\n  merchant: string\n  amount: number\n  category: string\n  date: string\n}\n\nexport function exportToCSV(expenses: Expense[]): void {\n  const headers = ['Date', 'Merchant', 'Amount', 'Category']\n  const rows = expenses.map(exp => [\n    new Date(exp.date).toLocaleDateString(),\n    exp.merchant,\n    `$${exp.amount.toFixed(2)}`,\n    exp.category\n  ])\n\n  const csv = [\n    headers.join(','),\n    ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))\n  ].join('\\n')\n\n  downloadFile(csv, 'expenses.csv', 'text/csv')\n}\n\nexport function exportToPDF(expenses: Expense[]): void {\n  // Simple PDF generation using data URL and print\n  const total = expenses.reduce((sum, exp) => sum + exp.amount, 0)\n  \n  const html = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Expense Report</title>\n      <style>\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        h1 { color: #333; }\n        table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }\n        th { background-color: #f5f5f5; font-weight: bold; }\n        .total { font-weight: bold; font-size: 18px; margin-top: 20px; }\n      </style>\n    </head>\n    <body>\n      <h1>Expense Report</h1>\n      <p>Generated: ${new Date().toLocaleDateString()}</p>\n      <table>\n        <thead>\n          <tr>\n            <th>Date</th>\n            <th>Merchant</th>\n            <th>Amount</th>\n            <th>Category</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${expenses.map(exp => `\n            <tr>\n              <td>${new Date(exp.date).toLocaleDateString()}</td>\n              <td>${exp.merchant}</td>\n              <td>$${exp.amount.toFixed(2)}</td>\n              <td>${exp.category}</td>\n            </tr>\n          `).join('')}\n        </tbody>\n      </table>\n      <div class=\"total\">Total Expenses: $${total.toFixed(2)}</div>\n    </body>\n    </html>\n  `\n\n  const newWindow = window.open()\n  if (newWindow) {\n    newWindow.document.write(html)\n    newWindow.document.close()\n    newWindow.print()\n  }\n}\n\nfunction downloadFile(content: string, filename: string, type: string): void {\n  const blob = new Blob([content], { type })\n  const url = URL.createObjectURL(blob)\n  const link = document.createElement('a')\n  link.href = url\n  link.download = filename\n  document.body.appendChild(link)\n  link.click()\n  document.body.removeChild(link)\n  URL.revokeObjectURL(url)\n}\n"],"names":[],"mappings":";;;;;;AAQO,SAAS,YAAY,QAAmB;IAC7C,MAAM,UAAU;QAAC;QAAQ;QAAY;QAAU;KAAW;IAC1D,MAAM,OAAO,SAAS,GAAG,CAAC,CAAA,MAAO;YAC/B,IAAI,KAAK,IAAI,IAAI,EAAE,kBAAkB;YACrC,IAAI,QAAQ;YACZ,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI;YAC3B,IAAI,QAAQ;SACb;IAED,MAAM,MAAM;QACV,QAAQ,IAAI,CAAC;WACV,KAAK,GAAG,CAAC,CAAA,MAAO,IAAI,GAAG,CAAC,CAAA,OAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC;KACtD,CAAC,IAAI,CAAC;IAEP,aAAa,KAAK,gBAAgB;AACpC;AAEO,SAAS,YAAY,QAAmB;IAC7C,iDAAiD;IACjD,MAAM,QAAQ,SAAS,MAAM,CAAC,CAAC,KAAK,MAAQ,MAAM,IAAI,MAAM,EAAE;IAE9D,MAAM,OAAO,CAAC;;;;;;;;;;;;;;;;oBAgBI,EAAE,IAAI,OAAO,kBAAkB,GAAG;;;;;;;;;;;UAW5C,EAAE,SAAS,GAAG,CAAC,CAAA,MAAO,CAAC;;kBAEf,EAAE,IAAI,KAAK,IAAI,IAAI,EAAE,kBAAkB,GAAG;kBAC1C,EAAE,IAAI,QAAQ,CAAC;mBACd,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG;kBACzB,EAAE,IAAI,QAAQ,CAAC;;UAEvB,CAAC,EAAE,IAAI,CAAC,IAAI;;;0CAGoB,EAAE,MAAM,OAAO,CAAC,GAAG;;;EAG3D,CAAC;IAED,MAAM,YAAY,OAAO,IAAI;IAC7B,IAAI,WAAW;QACb,UAAU,QAAQ,CAAC,KAAK,CAAC;QACzB,UAAU,QAAQ,CAAC,KAAK;QACxB,UAAU,KAAK;IACjB;AACF;AAEA,SAAS,aAAa,OAAe,EAAE,QAAgB,EAAE,IAAY;IACnE,MAAM,OAAO,IAAI,KAAK;QAAC;KAAQ,EAAE;QAAE;IAAK;IACxC,MAAM,MAAM,IAAI,eAAe,CAAC;IAChC,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,KAAK,IAAI,GAAG;IACZ,KAAK,QAAQ,GAAG;IAChB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,KAAK,KAAK;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,IAAI,eAAe,CAAC;AACtB"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/components/expense-list.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Trash2, Download } from 'lucide-react'\nimport { deleteExpenseFromIndexedDB } from '@/lib/db-utils'\nimport { exportToCSV, exportToPDF } from '@/lib/export-utils'\n\ninterface Expense {\n  id: string\n  merchant: string\n  amount: number\n  category: string\n  date: string\n  receipt?: string\n}\n\ninterface ExpenseListProps {\n  expenses: Expense[]\n  onExpenseDeleted: (id: string) => void\n}\n\nconst categoryColors: Record<string, string> = {\n  'Food': 'bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-200',\n  'Travel': 'bg-blue-100 text-blue-900 dark:bg-blue-900/30 dark:text-blue-200',\n  'Office': 'bg-purple-100 text-purple-900 dark:bg-purple-900/30 dark:text-purple-200',\n  'Other': 'bg-gray-100 text-gray-900 dark:bg-gray-900/30 dark:text-gray-200',\n}\n\nexport default function ExpenseList({ expenses, onExpenseDeleted }: ExpenseListProps) {\n  const [selectedExpenses, setSelectedExpenses] = useState<string[]>([])\n\n  const handleDelete = async (id: string) => {\n    await deleteExpenseFromIndexedDB(id)\n    onExpenseDeleted(id)\n  }\n\n  const totalAmount = expenses.reduce((sum, exp) => sum + exp.amount, 0)\n  const categoryBreakdown = expenses.reduce((acc, exp) => {\n    acc[exp.category] = (acc[exp.category] || 0) + exp.amount\n    return acc\n  }, {} as Record<string, number>)\n\n  if (expenses.length === 0) {\n    return (\n      <Card className=\"p-8 text-center\">\n        <div className=\"space-y-3\">\n          <div className=\"text-6xl\">ðŸ“‹</div>\n          <h3 className=\"text-lg font-semibold text-foreground\">No expenses yet</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Start scanning receipts to track your expenses\n          </p>\n        </div>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n        <Card className=\"p-4 bg-primary/5 border-primary/20\">\n          <p className=\"text-sm text-muted-foreground\">Total Spent</p>\n          <p className=\"text-2xl font-bold text-primary\">${totalAmount.toFixed(2)}</p>\n        </Card>\n        <Card className=\"p-4 bg-accent/5 border-accent/20\">\n          <p className=\"text-sm text-muted-foreground\">Transactions</p>\n          <p className=\"text-2xl font-bold text-accent\">{expenses.length}</p>\n        </Card>\n        <Card className=\"p-4 bg-secondary/10 border-secondary/20\">\n          <p className=\"text-sm text-muted-foreground\">Avg. Per Receipt</p>\n          <p className=\"text-2xl font-bold text-foreground\">${(totalAmount / expenses.length).toFixed(2)}</p>\n        </Card>\n      </div>\n\n      {/* Category Breakdown */}\n      {Object.keys(categoryBreakdown).length > 0 && (\n        <Card className=\"p-4\">\n          <h4 className=\"font-semibold text-foreground mb-3\">By Category</h4>\n          <div className=\"space-y-2\">\n            {Object.entries(categoryBreakdown).map(([category, amount]) => (\n              <div key={category} className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">{category}</span>\n                <span className=\"font-medium text-foreground\">${amount.toFixed(2)}</span>\n              </div>\n            ))}\n          </div>\n        </Card>\n      )}\n\n      {/* Export Options */}\n      <div className=\"flex gap-2\">\n        <Button\n          onClick={() => exportToCSV(expenses)}\n          variant=\"outline\"\n          className=\"flex-1\"\n        >\n          <Download className=\"mr-2 h-4 w-4\" />\n          Export CSV\n        </Button>\n        <Button\n          onClick={() => exportToPDF(expenses)}\n          variant=\"outline\"\n          className=\"flex-1\"\n        >\n          <Download className=\"mr-2 h-4 w-4\" />\n          Export PDF\n        </Button>\n      </div>\n\n      {/* Expense List */}\n      <div className=\"space-y-3\">\n        <h3 className=\"font-semibold text-foreground\">Recent Expenses</h3>\n        {expenses.map((expense) => (\n          <Card key={expense.id} className=\"p-4 hover:bg-secondary/50 transition-colors\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <div className=\"flex-1 space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <h4 className=\"font-medium text-foreground\">{expense.merchant}</h4>\n                  <span className={`text-xs px-2 py-1 rounded-full ${categoryColors[expense.category] || categoryColors['Other']}`}>\n                    {expense.category}\n                  </span>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  {new Date(expense.date).toLocaleDateString()} at {new Date(expense.date).toLocaleTimeString()}\n                </p>\n              </div>\n              <div className=\"text-right space-y-2\">\n                <p className=\"text-lg font-bold text-primary\">${expense.amount.toFixed(2)}</p>\n                <Button\n                  onClick={() => handleDelete(expense.id)}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-destructive hover:bg-destructive/10\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1130, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,4TAAC,iZAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,4TAAC,iZAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,4TAAC,oZAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,4TAAC,oZAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 1208, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/v0-receipt-scanner-app/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport CameraCapture from '@/components/camera-capture'\nimport ExpenseList from '@/components/expense-list'\nimport { Card } from '@/components/ui/card'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\n\nexport default function Home() {\n  const [expenses, setExpenses] = useState<any[]>([])\n  const [scanCount, setScanCount] = useState(0)\n  const [isLoading, setIsLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState('scan')\n\n  // Load data from IndexedDB on mount\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        const db = await openIndexedDB()\n        const tx = db.transaction('expenses', 'readonly')\n        const store = tx.objectStore('expenses')\n        const allExpenses = await new Promise((resolve, reject) => {\n          const request = store.getAll()\n          request.onsuccess = () => resolve(request.result)\n          request.onerror = () => reject(request.error)\n        })\n        setExpenses(allExpenses)\n\n        // Load scan count\n        const countTx = db.transaction('metadata', 'readonly')\n        const countStore = countTx.objectStore('metadata')\n        const scanData = await new Promise<any>((resolve) => {\n          const request = countStore.get('scanCount')\n          request.onsuccess = () => resolve(request.result)\n        })\n        if (scanData) {\n          setScanCount(scanData.value)\n        }\n      } catch (error) {\n        console.error('Failed to load data:', error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n    loadData()\n  }, [])\n\n  const handleExpenseAdded = async (newExpense: any) => {\n    try {\n      const db = await openIndexedDB()\n      \n      // Reload expenses\n      const tx = db.transaction('expenses', 'readonly')\n      const store = tx.objectStore('expenses')\n      const allExpenses = await new Promise<any[]>((resolve, reject) => {\n        const request = store.getAll()\n        request.onsuccess = () => resolve(request.result)\n        request.onerror = () => reject(request.error)\n      })\n      setExpenses(allExpenses)\n\n      // Reload scan count\n      const countTx = db.transaction('metadata', 'readonly')\n      const countStore = countTx.objectStore('metadata')\n      const scanData = await new Promise<any>((resolve) => {\n        const request = countStore.get('scanCount')\n        request.onsuccess = () => resolve(request.result)\n      })\n      setScanCount(scanData?.value || 0)\n    } catch (error) {\n      console.error('Failed to reload data:', error)\n    }\n  }\n\n  const handleExpenseDeleted = (id: string) => {\n    setExpenses(expenses.filter(e => e.id !== id))\n  }\n\n  const handleResetScans = async () => {\n    const db = await openIndexedDB()\n    const tx = db.transaction('metadata', 'readwrite')\n    const store = tx.objectStore('metadata')\n    await new Promise<void>((resolve) => {\n      const request = store.put({ key: 'scanCount', value: 0 })\n      request.onsuccess = () => resolve()\n    })\n    setScanCount(0)\n  }\n\n  const handleProcessingComplete = () => {\n    setActiveTab('expenses')\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading your expenses...</p>\n        </div>\n      </div>\n    )\n  }\n\n  const isFreemiumLimited = scanCount >= 10\n  const scansRemaining = Math.max(0, 10 - scanCount)\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-secondary/10 p-4 sm:p-6\">\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl sm:text-4xl font-bold text-foreground\">ReceiptSnap</h1>\n              <p className=\"text-muted-foreground mt-1\">AI-powered expense tracking</p>\n            </div>\n            <div className=\"bg-primary/10 border border-primary/20 rounded-lg p-3 text-right\">\n              <p className=\"text-xs text-muted-foreground\">Free scans remaining</p>\n              <p className=\"text-2xl font-bold text-primary\">{scansRemaining}</p>\n              {scanCount > 0 && (\n                <button \n                  onClick={handleResetScans}\n                  className=\"text-xs text-primary hover:underline mt-2\"\n                >\n                  Reset (test)\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Freemium Notice */}\n        {isFreemiumLimited && (\n          <Card className=\"bg-amber-50 dark:bg-amber-950 border-amber-200 dark:border-amber-800 p-4\">\n            <p className=\"text-sm text-amber-900 dark:text-amber-100\">\n              You've reached your monthly free limit. Upgrade to unlimited scanning for $4.99/month.\n            </p>\n          </Card>\n        )}\n\n        {/* Main Tabs */}\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n            <TabsTrigger value=\"scan\">Scan Receipt</TabsTrigger>\n            <TabsTrigger value=\"expenses\">Expenses ({expenses.length})</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"scan\" className=\"space-y-4\">\n            {isFreemiumLimited ? (\n              <Card className=\"p-8 text-center\">\n                <p className=\"text-lg font-semibold text-foreground mb-4\">\n                  Monthly limit reached\n                </p>\n                <p className=\"text-muted-foreground mb-6\">\n                  You have 10 free scans per month. Upgrade to continue scanning.\n                </p>\n                <button className=\"bg-primary text-primary-foreground px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors\">\n                  Upgrade to Pro ($4.99/month)\n                </button>\n              </Card>\n            ) : (\n              <CameraCapture \n                onExpenseAdded={handleExpenseAdded}\n                onProcessingComplete={handleProcessingComplete}\n              />\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"expenses\" className=\"space-y-4\">\n            <ExpenseList\n              expenses={expenses}\n              onExpenseDeleted={handleExpenseDeleted}\n            />\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  )\n}\n\n// IndexedDB initialization\nfunction openIndexedDB(): Promise<IDBDatabase> {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('ReceiptSnapDB', 1)\n    request.onerror = () => reject(request.error)\n    request.onsuccess = () => resolve(request.result)\n    request.onupgradeneeded = (event) => {\n      const db = (event.target as IDBOpenDBRequest).result\n      if (!db.objectStoreNames.contains('expenses')) {\n        db.createObjectStore('expenses', { keyPath: 'id' })\n      }\n      if (!db.objectStoreNames.contains('metadata')) {\n        db.createObjectStore('metadata', { keyPath: 'key' })\n      }\n    }\n  })\n}\n"],"names":[],"mappings":"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"}}]
}